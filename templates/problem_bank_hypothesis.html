<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hypothesis Testing - Problem Bank</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Montserrat', sans-serif; background: #0E0E0F; min-height: 100vh; color: #FFFFFF; letter-spacing: 0.01em; line-height: 1.6; }
        .container { max-width: 1400px; margin: 0 auto; background: #1A1B1F; box-shadow: 0 0 60px rgba(0, 201, 242, 0.08); }
        .glass-card { background: #1A1B1F; padding: 40px; border-bottom: 1px solid rgba(191, 196, 201, 0.1); animation: fadeInUp 400ms forwards; opacity: 0; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .glass-card:nth-child(n) { animation-delay: calc(100ms * var(--i, 1)); }
        .header { text-align: center; padding: 48px 40px 32px; background: linear-gradient(180deg, #1A1B1F 0%, #0E0E0F 100%); border-bottom: 1px solid rgba(191, 196, 201, 0.15); }
        .header h1 { font-size: 32px; font-weight: 600; margin-bottom: 12px; letter-spacing: 0.5px; text-transform: uppercase; background: linear-gradient(90deg, #FFFFFF 0%, #00C9F2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header p { color: #BFC4C9; font-size: 14px; }
        .nav-buttons { display: flex; gap: 2px; justify-content: center; margin: 32px 0 0; padding-top: 24px; border-top: 1px solid rgba(191, 196, 201, 0.1); }
        .nav-btn { padding: 12px 28px; background: transparent; color: #BFC4C9; border: 1px solid rgba(191, 196, 201, 0.2); text-decoration: none; font-size: 13px; letter-spacing: 0.8px; text-transform: uppercase; transition: all 200ms; }
        .nav-btn:first-child { border-radius: 6px 0 0 6px; }
        .nav-btn:last-child { border-radius: 0 6px 6px 0; }
        .nav-btn:hover { background: rgba(0, 201, 242, 0.08); border-color: #00C9F2; color: #00C9F2; }
        .section-title { text-align: center; margin-bottom: 32px; font-size: 20px; font-weight: 600; letter-spacing: 1.5px; text-transform: uppercase; border-bottom: 2px solid #00C9F2; padding-bottom: 12px; display: inline-block; width: 100%; }
        .hypothesis-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 24px; margin: 24px 0; }
        .hypothesis-card { background: rgba(14, 35, 63, 0.3); padding: 32px; border-radius: 8px; text-align: center; border: 1px solid rgba(191, 196, 201, 0.15); transition: all 200ms; position: relative; overflow: hidden; }
        .hypothesis-card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px; }
        .hypothesis-card.null::before { background: #00C9F2; }
        .hypothesis-card.alternative::before { background: #11E0C1; }
        .hypothesis-card:hover { transform: translateY(-4px); box-shadow: 0 8px 30px rgba(0, 201, 242, 0.2); border-color: #00C9F2; }
        .hypothesis-card h3 { font-size: 14px; margin-bottom: 20px; color: #FFFFFF; font-weight: 600; letter-spacing: 0.8px; text-transform: uppercase; }
        .hypothesis-card p { color: #BFC4C9; line-height: 1.7; font-size: 13px; margin-bottom: 16px; }
        .hypothesis-card > div { margin-top: 20px; padding: 16px; background: rgba(0, 0, 0, 0.2); border-radius: 6px; border-left: 2px solid; }
        .hypothesis-card.null > div { border-left-color: #00C9F2; }
        .hypothesis-card.alternative > div { border-left-color: #11E0C1; }
        .hypothesis-card strong { color: #00C9F2; font-weight: 600; font-size: 11px; letter-spacing: 0.8px; text-transform: uppercase; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 24px 0; }
        .stat-card { background: rgba(14, 35, 63, 0.3); padding: 28px; border-radius: 8px; text-align: center; border: 1px solid rgba(0, 201, 242, 0.15); transition: all 200ms; }
        .stat-card:hover { border-color: #00C9F2; box-shadow: 0 0 30px rgba(0, 201, 242, 0.2); transform: scale(1.02) translateY(-2px); }
        .stat-card h3 { font-size: 11px; margin-bottom: 16px; text-transform: uppercase; letter-spacing: 1.2px; color: #BFC4C9; font-weight: 600; }
        .stat-card .value { font-size: 36px; font-weight: 600; margin: 12px 0; color: #11E0C1; }
        .stat-card .label { font-size: 12px; color: #BFC4C9; }
        .significance-badge { display: inline-block; padding: 14px 32px; border-radius: 6px; font-weight: 600; font-size: 13px; margin: 28px 0 0; border: 1px solid; letter-spacing: 1px; text-transform: uppercase; }
        .significant { background: rgba(17, 224, 193, 0.15); color: #11E0C1; border-color: rgba(17, 224, 193, 0.3); }
        .not-significant { background: rgba(235, 87, 87, 0.15); color: #EB5757; border-color: rgba(235, 87, 87, 0.3); }
        .visualization-section { text-align: center; padding: 40px; }
        .hypothesis-plot { max-width: 900px; margin: 0 auto; border-radius: 8px; overflow: hidden; border: 1px solid rgba(191, 196, 201, 0.15); transition: all 200ms; cursor: pointer; }
        .hypothesis-plot:hover { transform: scale(1.01) translateY(-2px); box-shadow: 0 8px 40px rgba(0, 201, 242, 0.25); }
        .hypothesis-plot img { width: 100%; height: auto; display: block; background: #0E0E0F; }
        .conclusion-box { background: rgba(14, 35, 63, 0.4); padding: 36px; border-radius: 8px; text-align: center; border: 1px solid rgba(17, 224, 193, 0.3); border-left: 3px solid #11E0C1; }
        .conclusion-box h3 { font-size: 16px; margin-bottom: 20px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; }
        .conclusion-box p { font-size: 14px; line-height: 1.8; color: #BFC4C9; }
        .conclusion-box p:last-child { margin-top: 20px; color: #11E0C1; }
        .interpretation-section { background: rgba(14, 35, 63, 0.4); padding: 40px; border-radius: 8px; border: 1px solid rgba(0, 201, 242, 0.2); }
        .interpretation-section h3 { text-align: center; margin-bottom: 32px; font-size: 20px; font-weight: 600; letter-spacing: 1.5px; text-transform: uppercase; border-bottom: 2px solid #00C9F2; padding-bottom: 12px; }
        .interpretation-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .interpretation-point { background: rgba(0, 0, 0, 0.2); padding: 24px; border-radius: 8px; border: 1px solid rgba(191, 196, 201, 0.1); transition: all 200ms; }
        .interpretation-point:hover { border-color: #00C9F2; transform: translateY(-2px); }
        .interpretation-point h4 { margin-bottom: 12px; font-size: 14px; font-weight: 600; color: #FFFFFF; }
        .interpretation-point p { font-size: 13px; line-height: 1.7; color: #BFC4C9; }
        #imageModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: #1A1B1F; padding: 32px; border-radius: 8px; max-width: 90%; max-height: 90%; position: relative; border: 1px solid rgba(0, 201, 242, 0.3); }
        .modal-content span { position: absolute; top: 16px; right: 16px; font-size: 32px; cursor: pointer; color: #BFC4C9; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(191, 196, 201, 0.1); }
        .modal-content span:hover { color: #00C9F2; background: rgba(0, 201, 242, 0.15); transform: rotate(90deg); }
        @media (max-width: 768px) { .hypothesis-grid, .stats-grid, .interpretation-content { grid-template-columns: 1fr; } .nav-buttons { flex-direction: column; } .nav-btn { width: 100%; border-radius: 6px !important; } .glass-card { padding: 24px; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="glass-card header">
            <h1>Hypothesis Testing</h1>
            <p>ANOVA: Does difficulty level significantly affect solving time?</p>
            <div class="nav-buttons">
                <a href="/" class="nav-btn">Home</a>
                <a href="/problem_bank" class="nav-btn">Main Dashboard</a>
                <a href="/problem_bank/regression" class="nav-btn">Regression Analysis</a>
            </div>
        </div>

        <div class="glass-card">
            <h2 class="section-title">Research Hypotheses</h2>
            <div class="hypothesis-grid">
                <div class="hypothesis-card null">
                    <h3>Null Hypothesis (H₀)</h3>
                    <p>{{ hypothesis.null_hypothesis }}</p>
                    <div><strong>Assumption:</strong> No difference exists between difficulty levels</div>
                </div>
                <div class="hypothesis-card alternative">
                    <h3>Alternative Hypothesis (H₁)</h3>
                    <p>{{ hypothesis.alternative_hypothesis }}</p>
                    <div><strong>Research Claim:</strong> Significant differences exist between levels</div>
                </div>
            </div>
        </div>

        <div class="glass-card">
            <h2 class="section-title">Statistical Results</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>F-Statistic</h3>
                    <div class="value">{{ hypothesis.f_statistic }}</div>
                    <div class="label">Test Statistic</div>
                </div>
                <div class="stat-card">
                    <h3>P-Value</h3>
                    <div class="value">{{ hypothesis.p_value }}</div>
                    <div class="label">Significance Level</div>
                </div>
                <div class="stat-card">
                    <h3>Eta-Squared (η²)</h3>
                    <div class="value">{{ hypothesis.eta_squared }}</div>
                    <div class="label">Effect Size</div>
                </div>
                <div class="stat-card">
                    <h3>Alpha Level</h3>
                    <div class="value">0.05</div>
                    <div class="label">Threshold</div>
                </div>
                <div class="stat-card">
                    <h3>Result</h3>
                    <div class="value">
                        {% if hypothesis.p_value < 0.05 %}Reject H₀{% else %}Fail to Reject H₀{% endif %}
                    </div>
                    <div class="label">Statistical Decision</div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 28px;">
                <div class="significance-badge {% if hypothesis.p_value < 0.05 %}significant{% else %}not-significant{% endif %}">
                    {% if hypothesis.p_value < 0.05 %}✓ Statistically Significant{% else %}✗ Not Statistically Significant{% endif %}
                </div>
            </div>
        </div>

        <div class="glass-card visualization-section">
            <h2 class="section-title">ANOVA: Difficulty Level vs Solving Time</h2>
            <div class="hypothesis-plot">
                <img src="{{ url_for('static', filename=hypothesis_plot) }}" 
                     alt="Hypothesis Test Visualization"
                     onclick="openModal(this.src)">
            </div>
        </div>

        <div class="glass-card">
            <div class="conclusion-box">
                <h3>Final Conclusion</h3>
                <p>{{ hypothesis.conclusion }}</p>
                {% if hypothesis.p_value < 0.05 %}
                <p>Strong evidence that difficulty levels significantly affect solving time. Consider difficulty when estimating time requirements.</p>
                {% else %}
                <p>Insufficient evidence to claim difficulty levels affect solving time differently. Other factors may be more important.</p>
                {% endif %}
            </div>
        </div>

        <div class="glass-card">
            <div class="interpretation-section">
                <h3>Statistical Interpretation</h3>
                <div class="interpretation-content">
                    <div class="interpretation-point">
                        <h4>P-Value Meaning</h4>
                        <p>A p-value of {{ hypothesis.p_value }} indicates the probability of observing these results if the null hypothesis were true. {% if hypothesis.p_value < 0.05 %}This is below our 0.05 threshold, providing strong evidence against the null hypothesis.{% else %}This is above our 0.05 threshold, so we cannot reject the null hypothesis with confidence.{% endif %}</p>
                    </div>
                    <div class="interpretation-point">
                        <h4>F-Statistic Context</h4>
                        <p>An F-statistic of {{ hypothesis.f_statistic }} measures the ratio of variance between difficulty groups to variance within groups. Higher values indicate greater differences between difficulty levels.</p>
                    </div>
                    <div class="interpretation-point">
                        <h4>Effect Size (η²)</h4>
                        <p>Eta-squared of {{ hypothesis.eta_squared }} represents the proportion of variance in solving time explained by difficulty level. Values above 0.14 indicate a large effect.</p>
                    </div>
                    <div class="interpretation-point">
                        <h4>ANOVA Methodology</h4>
                        <p>We used One-Way ANOVA to compare means across multiple difficulty groups. This test is ideal for categorical independent variables with continuous dependent variables.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="imageModal">
        <div class="modal-content">
            <span onclick="closeModal()">&times;</span>
            <img id="modalImage" src="" alt="Enlarged view" style="max-width: 100%; max-height: 80vh;">
        </div>
    </div>

    <script>
        function openModal(imageSrc) { document.getElementById('modalImage').src = imageSrc; document.getElementById('imageModal').style.display = 'flex'; }
        function closeModal() { document.getElementById('imageModal').style.display = 'none'; }
        window.onclick = function(event) { if (event.target === document.getElementById('imageModal')) closeModal(); }
    </script>
</body>
</html>